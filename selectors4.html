<!doctype html>
<meta charset=utf-8>
<title>CSS4セレクタ (Selectors Level 4)</title>
<link rel=stylesheet href="lilium.css">
<link rel=license href="http://creativecommons.org/licenses/by-nc/3.0/">
<script>
// word count
if (!!document.addEventListener) {
  document.addEventListener('DOMContentLoaded', function () {
    var e = document.querySelectorAll('p, li, dd, h1, h2, h3');
    var v;
    var l = e.length;
    while (l--) {
      v += e[l].textContent;
    }
    v.replace(/\n|\r|\s|\v/g, '');
    document.querySelector('h1').innerHTML += ' <span style="font-size: 70%">(' + v.length + ')</span>';
  }, false);
}
</script>
<script>
if (!!document.addEventListener) {
  document.addEventListener('DOMContentLoaded', function () {
    var sec = document.querySelectorAll('body > section[id]');
    var h = document.querySelectorAll('body > section[id] > h2:first-of-type');    
    var toc = '';
    var l = sec.length;
    while (l--) {
      toc = '<li><a href="#' + sec[l].id + '">' + h[l].innerHTML + '</a>' + toc;
    }
    var nav = document.createElement('nav');
    nav.innerHTML = '<h2>目次</h2><ol>' + toc + '</ol>';
    document.body.insertBefore(nav, sec[0]);
  }, false);
}
</script>
<body>

<h1>CSS4セレクタ (Selectors Level 4)</h1>
<!-- update: 2011-09-05 -->

<p><a href="http://www.w3.org/TR/css3-selectors/">CSS3のセレクタ仕様</a>が勧告されそうですが、CSS4のセレクタについても策定が始まっています。このノートでは、CSS4セレクタの機能についてCSS3のセレクタと比べながら紹介します。

<section id=about-selectors4>
<h2>Selectors Level 4仕様について</h2>

<p><a>セレクタ Level 4 (Selectors Level 4)</a>は、新しいレベルのセレクタ仕様です。CSS3でも数多くのセレクタが追加されましたが、Level 4ではさらに多くのセレクタが追加されています。

<p>2011年8月現在、Selectors Level 4はEditor's Draftという位置づけです。Editor's Draftとは仕様のEditorがまとめた仕様の案であり、公式な草案 (Working Draft) ではありません。W3CのCSSWGは、Selectors Level 3が勧告になってから、Selectors Level 4の草案を公開する予定です（勧告される前に次のレベルが公開されたら、混乱する人がいるのではという懸念があるようです）。<!-- ref: http://lists.w3.org/Archives/Public/www-style/2011Aug/0645.html -->

<p>仕様が初期の段階（WDさえ出ていない）ことから、仕様書にある機能がそのうちなくなる可能性があります。反対に、現在の仕様書にない新しいセレクタが追加される可能性もあります。

<p>実装状況ですが、多くのセレクタはCSS3までのレベルに存在していたものです。新しく追加されたセレクタについても、ブラウザの独自拡張を標準化したもの (<code>:any-link</code>, <code>:matches()</code>) や、他の仕様から移管されたもの (<code>:valid</code>, <code>:in-range</code>) ですので、次のレベルとはいえすでに実装が進んでいるとも言えます。

<aside id=is-selectors-css>
<h3>「CSS4セレクタ」か「セレクタ Level 4」か</h3>

<p>他のCSS3モジュールはたいてい「CSS <var>Foo</var> Module Level 3」と、CSS3のモジュールだと分かる名前になっていますが、セレクタ仕様については「Selectors Level 3」「Selectors Level 4」と、CSSの名を冠していません。どういうことでしょうか。セレクタ仕様はCSSではないのでしょうか。

<p>これは、他のCSSモジュールと違い、セレクタ仕様は他のWebプラットフォーム仕様で使われることがあるため、CSSに限定されないということを意味しています。たとえば、セレクタから要素を取得する<a href="http://www.w3.org/TR/selectors-api/">Selectors API</a>などは、CSSではありませんがセレクタを利用していますセレクタ仕様と同様に、<a href="http://www.w3.org/TR/css3-mediaquries">Media Queries</a>もHTMLの<code>media</code>属性などで使われることから、CSSの名を冠していません。（一方で、URLには<b>css3-</b>とあり、CSS3であることがわかります。）

<p>とはいえ、セレクタ仕様やメディアクエリーが「CSSでない」というわけではありません。CSSだけに限定されてはいないだけで、どちらもCSSの機能ではあります。「CSS3セレクタ」という表記がおかしいわけではありません。

<!-- todo: 参考情報へのURLを探す。 -->
</aside>
</section>

<section>

</section>

<footer>
<address><a rel=author href="http://profiles.google.com/masataka.yakura">Masataka Yakura</a></address>
</footer>

